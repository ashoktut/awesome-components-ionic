(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{wAJi:function(e,t,s){"use strict";s.r(t),s.d(t,"TouchSwipePageModule",(function(){return d}));var i=s("ofXK"),r=s("3Pt+"),n=s("TEn/"),o=s("tyNb"),a=s("mrSG"),p=s("fXoL");let u=(()=>{class e{constructor(e,t){this.gestureCtrl=e,this.el=t,this.debugMode=!1,this.tap=new p.o,this.doubleTap=new p.o,this.press=new p.o,this.swipe=new p.o,this.swipeEnd=new p.o,this.tapGesture={name:"tap",enabled:!1,interval:250},this.doubleTapGesture={name:"doubleTap",enabled:!1,interval:300},this.pressGesture={name:"press",enabled:!1,interval:251},this.swipeGesture={name:"swipe",enabled:!1,interval:250,threshold:15,reportInterval:void 0,direction:["right","left"]},this.DIRECTIVE_GESTURES=[this.tapGesture,this.doubleTapGesture,this.pressGesture,this.swipeGesture],this.GESTURE_CREATED=!1,this.lastTap=0,this.tapCount=0,this.tapTimeout=null,this.pressTimeout=null,this.isPressing=!1,this.moveTimeout=null,this.isMoving=!1,this.lastSwipeReport=null}ngOnInit(){this.initSetupGestures()}onPress(e){this.pressGesture.enabled&&this.handlePressing(e.type)}handleTaps(e){const t=Math.floor(e.timeStamp),s=this.lastTap+this.tapGesture.interval>t;if(!this.tapGesture.enabled&&!this.doubleTapGesture.enabled||this.isPressing||this.isMoving)return this.resetTaps();this.tapCount++,s&&this.doubleTapGesture.enabled?this.emitTaps():s||(this.tapTimeout=setTimeout(()=>this.emitTaps(),this.tapGesture.interval)),this.lastTap=t}initSetupGestures(){this.DIRECTIVE_GESTURES.filter(e=>{this.gestureOpts.find(t=>{e.name===t.name&&(e.enabled=!0,"swipe"===e.name?(this.swipeGesture.reportInterval=t.reportInterval||e.reportInterval,this.swipeGesture.direction=t.direction||e.direction,this.createGesture()):(e.interval=t.interval||e.interval,e.threshold=t.threshold||e.threshold))})})}handleMoving(e,t){null!==this.moveTimeout&&(clearTimeout(this.moveTimeout),this.moveTimeout=null);const s=t.deltaX,i=t.deltaY,r=Math.abs(s),n=Math.abs(i),o=this.swipeGesture.reportInterval||"live",a=this.swipeGesture.threshold;if(r<a&&n<a)return;const p=this.isMoving&&("start"===o&&null===this.lastSwipeReport||"live"===o||"end"===o&&"moveend"===e);if(this.lastSwipeReport=t.timeStamp,p){const o=Object.assign({dirX:void 0,dirY:void 0,swipeType:e},t);r>a&&(s>0?o.dirX="right":s<0&&(o.dirX="left")),n>a&&(i>0?o.dirY="down":i<0&&(o.dirY="up"));const p=this.swipeGesture.direction;(p.includes(o.dirX)||p.includes(o.dirY))&&(this.debugMode&&console.log("Swipe"),this.swipe.emit(o))}"moveend"===e&&null!==this.lastSwipeReport&&(this.isMoving=!1,this.lastSwipeReport=null,this.swipeEnd.emit())}handlePressing(e){"touchstart"===e?this.pressTimeout=setTimeout(()=>{this.isPressing=!0,this.debugMode&&console.log("PressStart"),this.press.emit("start")},this.pressGesture.interval):"touchend"===e&&(clearTimeout(this.pressTimeout),this.isPressing&&(this.debugMode&&console.log("PressEnd"),this.press.emit("end"),this.resetTaps()),setTimeout(()=>this.isPressing=!1,150))}createGesture(){this.GESTURE_CREATED||(this.gestureCtrl.create({gestureName:"socialGesture",el:this.el.nativeElement,onStart:()=>{this.swipeGesture.enabled&&(this.isMoving=!0,this.moveTimeout=setInterval(()=>{this.isMoving=!1},249))},onMove:e=>{this.swipeGesture.enabled&&this.handleMoving("moving",e)},onEnd:e=>{this.swipeGesture.enabled&&this.handleMoving("moveend",e)}},!0).enable(),this.GESTURE_CREATED=!0)}emitTaps(){1===this.tapCount&&this.tapGesture.enabled?(this.debugMode&&console.log("1 Tap "),this.tap.emit()):2===this.tapCount&&this.doubleTapGesture.enabled&&(this.debugMode&&console.log("2 Tap"),this.doubleTap.emit()),this.resetTaps()}resetTaps(){clearTimeout(this.tapTimeout),this.tapCount=0,this.tapTimeout=null,this.lastTap=0}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(n.e),p.Qb(p.l))},e.\u0275dir=p.Lb({type:e,selectors:[["","appSocialGestures",""]],hostBindings:function(e,t){1&e&&p.ec("touchstart",(function(e){return t.onPress(e)}))("touchend",(function(e){return t.onPress(e)}))("click",(function(e){return t.handleTaps(e)}))},inputs:{gestureOpts:"gestureOpts",debugMode:"debugMode"},outputs:{tap:"tap",doubleTap:"doubleTap",press:"press",swipe:"swipe",swipeEnd:"swipeEnd"}}),e})();const l=[{path:"",component:(()=>{class e{constructor(e){this.toastController=e,this.gestureOptsTap=[{name:"tap"},{name:"doubleTap"}],this.gestureOptsPress=[{name:"press",interval:1500}],this.gestureOptsSwipe=[{name:"swipe",direction:["left","right"]}],this.direction=null}ngOnInit(){}onTap(){this.presentToast("Tap")}onDoubleTap(){this.presentToast("DoubleTap")}onPress(){this.presentToast("Long Press 1.5s")}onSwipe(e){this.direction=e.dirX}onMoveed(){this.presentToast("Swipe End "+this.direction)}presentToast(e){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:500})).present()}))}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(n.zb))},e.\u0275cmp=p.Kb({type:e,selectors:[["app-touch-swipe"]],decls:25,vars:3,consts:[["slot","start"],["defaultHref","/gestures"],["color","primary","appSocialGestures","","debugMode","true",3,"gestureOpts","tap","doubleTap"],["color","secondary","appSocialGestures","","debugMode","true",3,"gestureOpts","press"],["color","tertiary","appSocialGestures","","debugMode","true",3,"gestureOpts","swipe","swipeEnd"]],template:function(e,t){1&e&&(p.Wb(0,"ion-header"),p.Wb(1,"ion-toolbar"),p.Wb(2,"ion-buttons",0),p.Rb(3,"ion-back-button",1),p.Vb(),p.Wb(4,"ion-title"),p.Mc(5,"Touch Swipe"),p.Vb(),p.Vb(),p.Vb(),p.Wb(6,"ion-content"),p.Wb(7,"ion-card",2),p.ec("tap",(function(){return t.onTap()}))("doubleTap",(function(){return t.onDoubleTap()})),p.Wb(8,"ion-card-header"),p.Wb(9,"ion-card-subtitle"),p.Mc(10,"Exemple 01"),p.Vb(),p.Wb(11,"ion-card-title"),p.Mc(12,"Tap and DoubleTap"),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"ion-card",3),p.ec("press",(function(){return t.onPress()})),p.Wb(14,"ion-card-header"),p.Wb(15,"ion-card-subtitle"),p.Mc(16,"Exemple 02"),p.Vb(),p.Wb(17,"ion-card-title"),p.Mc(18,"LongPress after 1.5 seconds"),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"ion-card",4),p.ec("swipe",(function(e){return t.onSwipe(e)}))("swipeEnd",(function(){return t.onMoveed()})),p.Wb(20,"ion-card-header"),p.Wb(21,"ion-card-subtitle"),p.Mc(22,"Exemple 03"),p.Vb(),p.Wb(23,"ion-card-title"),p.Mc(24,"Swipe Lefth Right"),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&e&&(p.Cb(7),p.oc("gestureOpts",t.gestureOptsTap),p.Cb(6),p.oc("gestureOpts",t.gestureOptsPress),p.Cb(6),p.oc("gestureOpts",t.gestureOptsSwipe))},directives:[n.z,n.mb,n.l,n.h,n.i,n.kb,n.u,n.m,u,n.o,n.p,n.q],styles:[""]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=p.Ob({type:e}),e.\u0275inj=p.Nb({factory:function(t){return new(t||e)},imports:[[o.j.forChild(l)],o.j]}),e})(),d=(()=>{class e{}return e.\u0275mod=p.Ob({type:e}),e.\u0275inj=p.Nb({factory:function(t){return new(t||e)},imports:[[i.c,r.g,n.nb,h]]}),e})()}}]);